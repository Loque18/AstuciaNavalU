<html>
	<head>
		
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
	
	<style>
	canvas {
	border:2px solid #28b0ff;
    background-color: #f1f1f1;
	}
	</style>
	
	</head>
	<body onload="startGame()">
	<br></br>
	
	<!--Ubicar barco-->
	<p>posicion X y Y</p>
	<input id = "coorX" type="number" min="0" max="10" required">
	<input id = "coorY" type="number" min="0" max="10" required"> 	
	 
	<!--Tipo y horizontal-->
	
	<br></br>
	<p>Tipo barco y orientacion</p>
	<input id = "tipoBarco" type="number" min="0" max="5" required">
	<input id = "orientacion" type="number" min="0" max="1" required">
	
	<button id="boton" onclick="crearBarco()">OK!</button>
	
	<br></br>
	<br></br>
	<p>Introduzca las coordenadas donde desea disparar</P>
	<!--Disparar-->
	<input id = "dispX" type="number" min="0" max="10" required">
	<input id = "dispY" type="number" min="0" max="10" required"> 	
	<button id="boton2" onclick="disparar()">Disparar!</button> 

	<button id="boton3" onclick="imprimirArrays()">Oprimeme :)!</button> 
	
	<p id="pruebas"></p>
	<p id="pruebas2"></p>
	
		<script>
		
		var myGameArea = {
			canvas : document.createElement("canvas"),
			start : function() {
			this.canvas.width = 330;
			this.canvas.height = 330;
			this.context = this.canvas.getContext("2d");
			document.body.insertBefore(this.canvas, document.body.childNodes[0]);
			}
		}

		function startGame() {
		myGameArea.start();
		
		new Tablero(330,330,30);
		
		
		}
				
		
		function Tablero(lineasX, lineasY, tamanioCeldas){
		
			tc = tamanioCeldas;
			
			linea = myGameArea.context;		
			
			//lineas 
			for(var i = 0; i < 12; i++){
			
				//horizontal
				linea.moveTo(tamanioCeldas*i, 0);
				linea.lineTo(tamanioCeldas*i, lineasY);
				linea.stroke();				
				//vertical
				linea.moveTo(0, tamanioCeldas*i);
				linea.lineTo(lineasX, tamanioCeldas*i);
				linea.stroke();
				
				
			}

				//lnV = new Linea(30*i, 0, 30*i, 330);
		}
		
		
		
		function Barco(ancho, alto, color, posicionX, posicionY) {
		
			this.width = ancho;
			this.height = alto;
			this.x = posicionX;
			this.y = posicionY;
			
			cuadrado = myGameArea.context;
			cuadrado.fillStyle = color;
			cuadrado.fillRect(this.x, this.y, this.width, this.height);
		} 
		
		var tc;
		var Bx = [];
		var By = [];
		var temp = 0;
		var tipoB;
		var orientacion;
		
		
		function crearBarco(){
		
			orientacion = document.getElementById("orientacion").value; //asignar orientacion
			tipoB = document.getElementById("tipoBarco").value; //Asignar tipo de barco
			
			var corX = document.getElementById("coorX").value;
			Bx[temp] = corX;
			
			var corY = document.getElementById("coorY").value;
			By[temp] = corY;
			
			var compX = Number(corX) + Number(tipoB);
			var compY = Number(corY) + Number(tipoB);
			
			if( compX <= 12 && corX > 0){ //330/30
				//orientacion y tipo de barco
				if(orientacion == 0){			
					myGamePiece = new Barco(tc*tipoB, tc, "black", (corX-1)*tc, (corY-1)*tc);

				}
				else {
					//////////////
					
				}
			}
			else
				alert("la longitud del barco sobrepasa los limites del tablero");  
			 
			
			if( compY <= 12 && corY > 0){
				if(orientacion == 1)
							myGamePiece = new Barco(tc, tc*tipoB, "black", (corX-1)*tc, (corY-1)*tc);
						else	
							console.log("0 - horizontal | 1 - vertical");	
			}
			else
				alert("la longitud del barco sobrepasa los limites del tablero");  
			console.log("suma x = " + compX + " suma Y " + compY); 
			
			temp++;
		}
		
		function disparar(){
				
				var dispX = document.getElementById("dispX").value;
				var dispY = document.getElementById("dispY").value;				
				document.getElementById("pruebas2").innerHTML = dispX + ", " + dispY; //--> probar disparo
				
				
				for(var i = 0; i < 5; i++)
				{
					if(dispX >= Bx[i] && (dispX <= Number(Bx[i] + tipoB)))
					{
						//if(dispY >= Bx[i] && dispY )
						
							document.getElementById("pruebas").innerHTML = "Boom!!!";
							linea = myGameArea.context;
							linea.fillStyle = "#FF0000";
							linea.fillRect((dispX-1)*tc, (dispY-1)*tc, 1*tc, 1*tc);
							break;
							
					}
					else{
						document.getElementById("pruebas").innerHTML = "fallo!!!";
						linea = myGameArea.context;
						linea.fillStyle = "#54baff";
						linea.fillRect((dispX-1)*tc, (dispY-1)*tc, 1*tc, 1*tc);
					}
				}
		}	
			
			
		function imprimirArrays(){	
		
			for(var i = 0; i < 5; i++){
			console.log('Bx[' + i + ']=' + Bx[i]);
			console.log('By[' + i + ']=' + By[i]);
			
			}
			console.log(''); //enter despues de cada impresion  
			//console.log(tipoB);
		}	

		</script>



	</body>
</html>
